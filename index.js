!function(e){function t(t){for(var n,i,o=t[0],a=t[1],s=0,l=[];s<o.length;s++)i=o[s],r[i]&&l.push(r[i][0]),r[i]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(c&&c(t);l.length;)l.shift()()}var n={},r={0:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise(function(t,i){n=r[e]=[t,i]});t.push(n[2]=o);var a,s=document.getElementsByTagName("head")[0],c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=function(e){return i.p+""+e+".index.js"}(e),a=function(t){c.onerror=c.onload=null,clearTimeout(l);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,a=new Error("Loading chunk "+e+" failed.\n("+i+": "+o+")");a.type=i,a.request=o,n[1](a)}r[e]=void 0}};var l=setTimeout(function(){a({type:"timeout",target:c})},12e4);c.onerror=c.onload=a,s.appendChild(c)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var o=window.webpackJsonp=window.webpackJsonp||[],a=o.push.bind(o);o.push=t,o=o.slice();for(var s=0;s<o.length;s++)t(o[s]);var c=a;i(i.s=27)}([function(e,t,n){"use strict";function r(e,t){this.x=e,this.y=t}function i(e,t,n,r){this.height=r,this.width=n,this.x=e,this.y=t}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i})},function(e,t,n){"use strict";function r(e){return function(t){return Math.pow(t,e)}}function i(e){return function(t){return 1-r(e)(1-t)}}function o(e){return function(t){return t*e}}function a(e){return r(4)(e)}function s(e){return i(3)(e)}function c(e){return function(t){return e(1-t)}}n.d(t,"b",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"e",function(){return c})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0),i={collidePointPoint:function(e,t){if(e.x!==t.x||e.y!==t.y)return!1;return!0},collidePointRectangle:function(e,t){if(e.x<t.x||e.x>t.x+t.width-1||e.y<t.y||e.y>t.y+t.height-1)return!1;return!0},collideRectangleRectangle:function(e,t){if(e.x+e.width-1<t.x||e.x>t.x+t.width-1||e.y+e.height-1<t.y||e.y>t.y+t.height-1)return!1;return!0}};function o(e,t){var n=[],o="collide";return e instanceof r.a==!0&&(n.push(e),o+="Point"),t instanceof r.a==!0&&(n.push(t),o+="Point"),-1===n.indexOf(e)&&e instanceof r.b==!0&&(n.push(e),o+="Rectangle"),-1===n.indexOf(t)&&t instanceof r.b==!0&&(n.push(t),o+="Rectangle"),i[o].apply(null,n)}},function(e,t,n){"use strict";function r(e){var t=window.localStorage.getItem(e);return null!==t?JSON.parse(t):null}function i(e,t){window.localStorage.setItem(e,JSON.stringify(t))}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i})},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";function r(){!0===this.debug&&(this.$.world.system("debug-inputs",[],this.systems.debug.inputs),this.$.world.system("debug-hitbox",["cameras","hitbox","position"],this.systems.debug.hitbox),this.$.world.system("debug-camera",[],this.systems.debug.camera),this.$.world.system("debug-spritesheet",["cameras","images","position"],this.systems.debug.spritesheet),this.$.world.system("debug-pause",[],this.systems.debug.pause)),this.$.controllers.inputs.length=0,this.$.camera.clean(),this.$.hud.clean()}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(){this.$.controllers.inputs.forEach(function(e){}),this.$.world.system("inputs",["inputs"],this.systems.common.inputs)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(){console.log("lifecycle :","destroy level scene"),console.log("---------"),this.$.controllers.destroy(),delete this.$.best,delete this.$.camera,delete this.$.controllers,delete this.$.debugging,delete this.$.hud,delete this.$.score,delete this.$.world}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(){console.log("lifecycle :","panic level scene")}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(){this.context.fillStyle="#222034",this.context.fillRect(0,0,this.size.width,this.size.height),this.$.world.system("images",["cameras","images","position"],this.systems.common.images),this.$.camera.render(),this.$.hud.render()}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(){console.log("lifecycle :","resize level scene")}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(3);function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(){var e=this;console.log("lifecycle :","start level scene"),this.$.best=r.a("best")||0,this.$.debugging={},this.$.score=0,this.$.world.initialize(i(this.pools.level.start())),this.snippets.level["best-score"](),this.$.camera.look(function(){return e.$.world.get("background").get("position").x+80},function(){return e.$.world.get("background").get("position").y+72}),this.$.hud.look(function(){return 80},function(){return 72}),this.assets.sounds.level.start().play()}},function(e,t,n){"use strict";function r(){this.$.world.system("previous",[],this.systems.common.previous),this.$.world.system("timeout",["timeout"],this.systems.common.timeout),this.$.world.system("commands",["commands"],this.systems.common.commands),this.$.world.system("state",["state"],this.systems.common.state),this.$.world.system("forces",["forces"],this.systems.common.forces),this.$.world.system("velocity",["position","velocity"],this.systems.common.velocity),this.$.world.system("fade",["fade"],this.systems.common.fade),this.$.world.system("hitbox",["hitbox","position","previous"],this.systems.common.hitbox),this.$.world.system("velocity",["position","velocity"],this.systems.common.velocity),this.$.world.system("spritesheets",["images"],this.systems.common.spritesheets),this.$.camera.update(this.delta),this.$.hud.update(this.delta)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(){}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(){}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(){console.log("lifecycle :","destroy loading scene"),console.log("---------"),delete this.$.timeout}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(){console.log("lifecycle :","panic loading scene")}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(){this.context.fillStyle="#222034",this.context.fillRect(0,0,this.size.width,this.size.height),this.context.font="16px Courier New",this.context.textAlign="start",this.context.textBaseline="top",this.context.fillStyle="#ffffff",this.context.fillText("/ Theatre",8,8),this.context.fillStyle="#cbdbfc",this.context.fillText("$ preloading assets...",8,32),!1===this.preloading&&(this.context.fillStyle="#99e550",this.context.fillText("$ preloading completed",8,56),this.context.fillStyle="#cbdbfc",this.context.fillText("$ loading demo scene...",8,80))}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(){console.log("lifecycle :","resize loading scene")}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(){console.log("lifecycle :","setup loading scene"),this.$.timeout=0}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(){console.log("lifecycle :","start loading scene")}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(){!1===this.preloading&&(this.$.timeout+=this.delta,this.$.timeout>=1e3&&this.load("level"))}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t,n){var i={},o=null;function a(e,t){i[e]=t,n.push({type:"GAMEPAD",action:e,state:!0===t?"DOWN":"UP"})}function s(){o=window.requestAnimationFrame(function e(){var s=navigator.getGamepads()||[];if(void 0!==s[0]&&null!==s[0]&&!0===document.hasFocus()){var c=s[0];[[0,"A"],[1,"B"],[2,"X"],[3,"Y"],[4,"LB"],[5,"RB"],[6,"LT"],[7,"RT"],[8,"BACK"],[9,"START"],[10,"LSB"],[11,"RSB"],[12,"UP"],[13,"DOWN"],[14,"LEFT"],[15,"RIGHT"]].forEach(function(e){var n=r(e,2),o=n[0],s=n[1],l="GAMEPAD_"+s;-1!==t.indexOf(l)&&!0===c.buttons[o].pressed&&!1===i[l]?a(l,!0):-1!==t.indexOf(l)&&!1===c.buttons[o].pressed&&!0===i[l]&&a(l,!1)});[[0,["LS_LEFT","LS_RIGHT"]],[1,["LS_UP","LS_DOWN"]],[2,["RS_LEFT","RS_RIGHT"]],[3,["RS_UP","RS_DOWN"]]].forEach(function(e){var n=r(e,2),o=n[0],s=r(n[1],2),l=s[0],u=s[1];if(c.axes[o]<=-.5){var f="GAMEPAD_"+l;-1!==t.indexOf(f)&&!1===i[f]&&a(f,!0)}else if(c.axes[o]>-.5){var m="GAMEPAD_"+l;-1!==t.indexOf(m)&&!0===i[m]&&a(m,!1)}if(c.axes[o]>=.5){var p="GAMEPAD_"+u;-1!==t.indexOf(p)&&!1===i[p]&&a(p,!0)}else if(c.axes[o]<.5){var d="GAMEPAD_"+u;-1!==t.indexOf(d)&&!0===i[d]&&a(d,!1)}})}else!1!==document.hasFocus()&&0!==s.length||function(){for(var e in i)i.hasOwnProperty(e)&&!0===i[e]&&(i[e]=!1,n.push({type:"GAMEPAD",action:e,state:"UP"}))}();o=window.requestAnimationFrame(e.bind(this))}.bind(this))}t.forEach(function(e){i[e]=!1}),s.call(this),this.destroy=function(){window.cancelAnimationFrame(o)},this.setup=s}var a=[];function s(e,t){var n=[],r=[];(function(){n.push(new o(e,t,r)),n.push(new function(e,t,n){var r={};function i(){for(var e in r)r.hasOwnProperty(e)&&!0===r[e]&&(r[e]=!1,n.push({type:"KEYBOARD",action:e,state:"UP"}))}function o(e){var i="KEY_"+a[e.keyCode];-1!==t.indexOf(i)&&!1===r[i]&&(e.preventDefault(),r[i]=!0,n.push({type:"KEYBOARD",action:i,state:"DOWN"}))}function s(e){var i="KEY_"+a[e.keyCode];-1!==t.indexOf(i)&&!0===r[i]&&(e.preventDefault(),r[i]=!1,n.push({type:"KEYBOARD",action:i,state:"UP"}))}function c(){e.addEventListener("blur",i),e.addEventListener("keydown",o),e.addEventListener("keyup",s)}t.forEach(function(e){r[e]=!1}),c.call(this),this.destroy=function(){e.removeEventListener("blur",i),e.removeEventListener("keydown",o),e.removeEventListener("keyup",s)},this.setup=c}(e,t,r)),n.push(new function(e,t,n){function r(e){-1!==t.indexOf("CLICK_RIGHT")&&e.preventDefault()}function i(e){var r=e.button,i=["LEFT","MIDDLE","RIGHT"];if(void 0!==i[r]){var o="CLICK_"+i[r];if(-1!==t.indexOf(o)){e.preventDefault();var a=e.target.getBoundingClientRect(),s=e.clientX-a.left,c=e.clientY-a.top;n.push({type:"MOUSE",action:o,state:"DOWN",x:s,y:c})}}}function o(e){if(-1!==t.indexOf("MOVE")){e.preventDefault();var r=e.target.getBoundingClientRect(),i=e.clientX-r.left,o=e.clientY-r.top;n.push({type:"MOUSE",action:"MOVE",state:"ENTER",x:i,y:o})}}function a(e){if(-1!==t.indexOf("MOVE")){e.preventDefault();var r=e.target.getBoundingClientRect(),i=e.clientX-r.left,o=e.clientY-r.top;n.push({type:"MOUSE",action:"MOVE",state:"LEAVE",x:i,y:o})}}function s(e){if(-1!==t.indexOf("MOVE")){e.preventDefault();var r=e.target.getBoundingClientRect(),i=e.clientX-r.left,o=e.clientY-r.top;n.push({type:"MOUSE",action:"MOVE",x:i,y:o})}}function c(e){var r=e.button,i=["LEFT","MIDDLE","RIGHT"];if(void 0!==i[r]){var o="CLICK_"+i[r];if(-1!==t.indexOf(o)){e.preventDefault();var a=e.target.getBoundingClientRect(),s=e.clientX-a.left,c=e.clientY-a.top;n.push({type:"MOUSE",action:o,state:"UP",x:s,y:c})}}}function l(){e.addEventListener("contextmenu",r),e.addEventListener("mousedown",i),e.addEventListener("mouseenter",o),e.addEventListener("mouseleave",a),e.addEventListener("mousemove",s),e.addEventListener("mouseup",c),e.addEventListener("wheel",u)}function u(e){if(-1!==t.indexOf("SCROLL")){e.preventDefault();var r,i=e.target.getBoundingClientRect(),o=e.clientX-i.left,a=e.clientY-i.top;Math.abs(e.deltaY)>=Math.abs(e.deltaX)?(r="DOWN",e.deltaY<0&&(r="UP")):(r="RIGHT",e.deltaX<0&&(r="LEFT")),n.push({type:"MOUSE",action:"SCROLL",state:r,x:o,y:a})}}l.call(this),this.destroy=function(){e.removeEventListener("contextmenu",r),e.removeEventListener("mousedown",i),e.removeEventListener("mouseenter",o),e.removeEventListener("mouseleave",a),e.removeEventListener("mousemove",s),e.removeEventListener("mouseup",c),e.removeEventListener("wheel",u)},this.setup=l}(e,t,r))}).call(this),this.inputs=r,this.destroy=function(){n.forEach(function(e){e.destroy()})}}function c(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(){console.log("lifecycle :","setup level scene"),this.$.controllers=new s(this.element,[].concat(c(this.assets.datasets.debug.inputs()),c(this.assets.datasets.level.inputs()))),this.$.camera=this.snippets.common["setup-camera"]("default","contain-framed",160,144,1),this.$.hud=this.snippets.common["setup-camera"]("hud","contain-framed",160,144,1),this.$.world=this.snippets.common["setup-world"]()}a[9]="TAB",a[13]="ENTER",a[16]="SHIFT",a[17]="CTRL",a[18]="ALT",a[27]="ESC",a[32]="SPACE",a[46]="DELETE",a[37]="LEFT",a[38]="UP",a[39]="RIGHT",a[40]="DOWN",a[48]="ZERO",a[49]="ONE",a[50]="TWO",a[51]="THREE",a[52]="FOUR",a[53]="FIVE",a[54]="SIX",a[55]="SEVEN",a[56]="EIGHT",a[57]="NINE",a[65]="A",a[66]="B",a[67]="C",a[68]="D",a[69]="E",a[70]="F",a[71]="G",a[72]="H",a[73]="I",a[74]="J",a[75]="K",a[76]="L",a[77]="M",a[78]="N",a[79]="O",a[80]="P",a[81]="Q",a[82]="R",a[83]="S",a[84]="T",a[85]="U",a[86]="V",a[87]="W",a[88]="X",a[89]="Y",a[90]="Z",n.d(t,"a",function(){return u})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c});var r=n(24),i=n(25),o=n(26);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(t){var s=t.container,c=t.debug||!1,l=t.expose||!1,u=t.framerate||60,f=t.panic||4e3,m=t.sharp||!1,p=t.speed||1,d={height:s.offsetHeight,width:s.offsetWidth},h=null,y=null,g=!1,v=0;function x(){var t=this,r=n(43);this.entities={},r.keys().forEach(function(e){var n=a(e.match(/^\.\/([^\/]+)\/([^\/]+)\.json$/),3),i=(n[0],n[1]),o=n[2];void 0===t.entities[i]&&(t.entities[i]={}),void 0===t.entities[i][o]&&(t.entities[i][o]={});var s=JSON.parse(JSON.stringify(r(e)));!1===s.hasOwnProperty("components")&&(s.components=[]),s.components=s.components.reverse().filter(function(e,t,n){return t===n.findIndex(function(t){return e.name===t.name})}).reverse();t.entities[i][o]=function(){return JSON.parse(JSON.stringify(s))}}),void 0!==e.hot&&e.hot.accept(r.id,function(){x.call(t),w.call(t)})}function b(e,t){this.delta=e,s.offsetWidth===this.size.width&&s.offsetHeight===this.size.height||function(){this.size.width=s.offsetWidth,this.size.height=s.offsetHeight,h.resize(this.size.width,this.size.height),this.scene.resize.call(this)}.call(this),!0===this.playing&&this.tick(),this.scene.before.call(this),v>0&&function(e){for(;v>0;)!0===e?this.scene.panic.call(this):this.scene.update.call(this),v-=1,!0!==g?null===y||(this.scene.destroy.call(this),this.scene=this.scenes[y],this.scene.setup.call(this),this.scene.start.call(this),y=null):(this.scene.start.call(this),g=!1)}.call(this,t),this.scene.render.call(this),this.scene.after.call(this)}function w(){var t=this,r=n(62);this.pools={},r.keys().forEach(function(e){var n=a(e.match(/^\.\/([^\/]+)\/([^\/]+)\.json$/),3),i=(n[0],n[1]),o=n[2];void 0===t.pools[i]&&(t.pools[i]={}),void 0===t.pools[i][o]&&(t.pools[i][o]={});var s=JSON.parse(JSON.stringify(r(e)));s.forEach(function(e){!1===e.hasOwnProperty("components")&&(e.components=[]);var n=t.entities[e.entity.scope][e.entity.name]().components;e.components=n.concat(e.components),delete e.entity});t.pools[i][o]=function(){return JSON.parse(JSON.stringify(s))}}),void 0!==e.hot&&e.hot.accept(r.id,function(){w.call(t)})}this.$={},this.components={},this.debug=c,this.entities={},this.playing=!0,this.pools={},this.preloading=!1,this.scenes={},this.size=d,this.snippets={},this.systems={},this.version="0.42.0",this.load=function(e){y=e},this.pause=function(){this.playing=!1},this.play=function(){this.playing=!0},this.restart=function(){g=!0},this.tick=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;v+=e},function(){h=new r.a("2d","theatre",this.size.width,this.size.height,m),s.appendChild(h.element),h.focus(),this.container=s,this.context=h.context,this.element=h.element,this.assets={},this.delta=0,this.loop=new i.a(b.bind(this),u,p,f),function t(){var r=this,i=n(28);Object(o.a)(i,function(e){r.assets={},e.forEach(function(e){var t=e.getter,n=e.name,i=e.scope,o=(e.source,e.type);void 0===r.assets[o]&&(r.assets[o]={}),void 0===r.assets[o][i]&&(r.assets[o][i]={}),r.assets[o][i][n]=t}),r.preloading=!1}),void 0!==e.hot&&e.hot.accept(i.id,function(){t.call(r)}),this.preloading=!0}.call(this),function t(){var r=this,i=n(29);this.components={},i.keys().forEach(function(e){var t=e.match(/^\.\/([^\/]+)\.json$/)[1],n=i(e);r.components[t]=function(){return JSON.parse(JSON.stringify(n))}}),void 0!==e.hot&&e.hot.accept(i.id,function(){t.call(r),x.call(r),w.call(r)})}.call(this),x.call(this),w.call(this),function t(){var r=this,i=n(64);this.scenes={},i.keys().forEach(function(e){var t=e.match(/^\.\/([^\/]+)\/index\.js$/),n=a(t,2),o=(n[0],n[1]);r.scenes[o]=i(e)}),void 0!==e.hot&&e.hot.accept(i.id,function(){t.call(r)})}.call(this),function t(){var r=this,i=n(67);this.snippets={},i.keys().forEach(function(e){var t=e.match(/^\.\/([^\/]+)\/([^\/]+)\.js$/),n=a(t,3),o=(n[0],n[1]),s=n[2];void 0===r.snippets[o]&&(r.snippets[o]={}),void 0===r.snippets[o][s]&&(r.snippets[o][s]={}),r.snippets[o][s]=i(e).default.bind(r)}),void 0!==e.hot&&e.hot.accept(i.id,function(){t.call(r)})}.call(this),function t(){var r=this,i=n(92);this.systems={},i.keys().forEach(function(e){var t=e.match(/^\.\/([^\/]+)\/([^\/]+)\.js$/),n=a(t,3),o=(n[0],n[1]),s=n[2];void 0===r.systems[o]&&(r.systems[o]={}),void 0===r.systems[o][s]&&(r.systems[o][s]={}),r.systems[o][s]=i(e)[s]}),void 0!==e.hot&&e.hot.accept(i.id,function(){t.call(r)})}.call(this),this.scene=this.scenes.loading,this.scene.setup.call(this),this.scene.start.call(this),this.loop.update()}.call(this,t),!0===l&&(window.theatre=this)}}).call(this,n(4)(e))},function(e,t,n){"use strict";function r(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=document.createElement("canvas"),a=o.getContext(e);function s(){o.setAttribute("tabindex",0),o.focus()}function c(e,t){var n=window.devicePixelRatio||1;!0===i&&(n=Math.floor(n)),o.setAttribute("height",n*t),o.setAttribute("width",n*e),o.style.height=t+"px",o.style.width=e+"px",a.scale(n,n),!0===i&&(o.style.imageRendering="-moz-crisp-edges",o.style.imageRendering="-webkit-crisp-edges",o.style.imageRendering="crisp-edges",o.style.imageRendering="pixelated",a.imageSmoothingEnabled=!1)}o.setAttribute("id",t),o.addEventListener("mousedown",s),c(n,r),this.context=a,this.element=o,this.focus=s,this.resize=c}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4e3,i=0,o=null,a=!1;this.framerate=t,this.panic=r,this.speed=n,this.pause=function(){a=!0},this.play=function(){a=!1},this.tick=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;requestAnimationFrame(function(){for(;n--;)e(1e3/t.framerate)})},this.update=function(){var t=performance.now();if(null!==o&&!1===a)for(i+=t-o;i>=1e3/this.framerate/this.speed&&!1===a;){var n=i>=this.panic/this.speed,r=!1===n?r=1e3/this.framerate:i*this.speed;i-=r/this.speed,e(r,n)}requestAnimationFrame(this.update.bind(this)),o=t}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){var n=[];e.keys().map(function(t){var i=r(t.match(/(?!\.\/|\/)(.+?)(?=(?:\.[a-zA-Z0-9]+$)|\/)/g),3),o=i[0],a=i[1],s={getter:null,name:i[2],scope:a,source:null,type:o},c=new Promise(function(n,r){if("datasets"===s.type)e(t).then(function(e){s.source=e,s.getter=function(){return JSON.parse(JSON.stringify(e))},n(s)});else if("images"===s.type){var i=new Image;e(t).then(function(e){i.src=e,i.onload=function(){s.source=e,s.getter=function(){return i},n(s)}})}else"sounds"===s.type&&e(t).then(function(e){var t=new Audio(e);t.oncanplaythrough=function(){s.source=e,s.getter=function(){return t.cloneNode()},n(s)}})});n.push(c)}),Promise.all(n).then(t)}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";n.r(t),new(n(23).a)({container:document.body,debug:!1,expose:!0,framerate:60,panic:4e3,sharp:!0,speed:1})},function(e,t,n){var r={"./datasets/debug/inputs.json":[112,1],"./datasets/level/inputs.json":[113,2],"./images/common/placeholder-8x1.png":[114,3],"./images/level/background-16x16@1x.png":[115,4],"./images/level/best-48x16@1x.png":[116,5],"./images/level/clouds-160x16@1x.png":[117,6],"./images/level/flappy-bird-16x16@1x.png":[118,7],"./images/level/flappy-bird-shadow-16x8@1x.png":[119,8],"./images/level/foreground-16x16@1x.png":[120,9],"./images/level/game-over-64x64@1x.png":[121,10],"./images/level/numbers-8x16@1x.png":[122,11],"./images/level/numbers-blue-8x16@1x.png":[123,12],"./images/level/pipe-16x16@1x.png":[124,13],"./images/level/pipe-shadow-16x8@1x.png":[125,14],"./images/level/touch-screen-64x32@1x.png":[126,15],"./images/level/waves-16x16@1x.png":[127,16],"./sounds/level/explode.mp3":[128,17],"./sounds/level/jump.mp3":[129,18],"./sounds/level/score.mp3":[130,19],"./sounds/level/start.mp3":[131,20]};function i(e){var t=r[e];return t?n.e(t[1]).then(function(){var e=t[0];return n(e)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}i.keys=function(){return Object.keys(r)},i.id=28,e.exports=i},function(e,t,n){var r={"./cameras.json":30,"./commands.json":31,"./fade.json":32,"./forces.json":33,"./hitbox.json":34,"./images.json":35,"./inputs.json":36,"./opacity.json":37,"./position.json":38,"./previous.json":39,"./state.json":40,"./timeout.json":41,"./velocity.json":42};function i(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=29},function(e){e.exports=[{$camera:{type:"$",name:"camera"},opacity:1}]},function(e){e.exports=[{$command:{type:"snippets",scope:"common",name:"handle-command"},parameters:["Hello, friend."]}]},function(e){e.exports={opacity:0,duration:1e3,$easing:{type:"snippets",scope:"common",name:"easing-linear"},$ending:{type:"snippets",scope:"common",name:"handle-fade-ending"},elapsed:0}},function(e){e.exports=[{x:48,y:0,duration:1e3,$easing:{type:"snippets",scope:"common",name:"easing-linear"},$handling:!1,$ending:!1,elapsed:0}]},function(e){e.exports={x:0,y:0,width:16,height:16,type:"movable",collideable:{limit:{type:"snippets",scope:"level",name:"reset-position"}}}},function(e){e.exports=[{name:"idle",$source:{type:"images",scope:"common",name:"placeholder-32x32"},frames:[[1,1,32,32],[2,1,32,32],[3,1,32,32],[4,1,32,32],[5,1,32,32],[6,1,32,32],[7,1,32,32],[8,1,32,32]],frame:0,framerate:8,destination:[0,0,0,64,64],opacity:1,elapsed:0}]},function(e){e.exports=[{actions:["CLICK_LEFT"],state:"DOWN",$command:{type:"snippets",scope:"common",name:"handle-command"}}]},function(e){e.exports={opacity:1}},function(e){e.exports={x:0,y:0,z:0}},function(e){e.exports={}},function(e){e.exports={state:{IDLE:1},$handling:{type:"snippets",scope:"common",name:"handle-state"},changes:[]}},function(e){e.exports={duration:1e3,elapsed:0,$ending:{type:"snippets",scope:"common",name:"handle-timeout-ending"}}},function(e){e.exports={top:0,right:0,bottom:0,left:0}},function(e,t,n){var r={"./level/background.json":44,"./level/best-score.json":45,"./level/bird.json":46,"./level/ceil-pipe.json":47,"./level/ceil.json":48,"./level/chunk.json":49,"./level/clouds.json":50,"./level/floor-pipe.json":51,"./level/floor.json":52,"./level/game-over.json":53,"./level/hit-score.json":54,"./level/limit.json":55,"./level/pipe-bottom.json":56,"./level/pipe-shadow.json":57,"./level/pipe-top.json":58,"./level/score.json":59,"./level/touch-screen.json":60,"./level/waves.json":61};function i(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=43},function(e){e.exports={name:"background",components:[{name:"cameras"},{name:"forces"},{name:"images",parameters:[{name:"sky",$source:{type:"images",scope:"level",name:"background-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[0,0,0,160,96],opacity:1,elapsed:0},{name:"water",$source:{type:"images",scope:"level",name:"background-16x16@1x"},frames:[[0,1,16,16]],frame:0,framerate:8,destination:[0,96,0,160,48],opacity:1,elapsed:0}]},{name:"position"}]}},function(e){e.exports={name:"best-score",components:[{name:"cameras",parameters:[{$camera:{type:"$",name:"hud"},opacity:1}]},{name:"images",parameters:[{name:"best",$source:{type:"images",scope:"level",name:"best-48x16@1x"},frames:[[0,0,48,16]],frame:0,framerate:8,destination:[0,0,0,48,16],opacity:1,elapsed:0},{name:"best-score",$source:{type:"images",scope:"level",name:"numbers-blue-8x16@1x"},frames:[[0,0,8,16]],frame:0,framerate:8,destination:[116,0,0,8,16],opacity:1,elapsed:0}]},{name:"position",parameters:{x:0,y:128,z:0}}]}},function(e){e.exports={name:"bird",components:[{name:"cameras"},{name:"forces"},{name:"hitbox",parameters:{x:4,y:2,width:8,height:12,type:"player",collideable:{danger:{type:"snippets",scope:"level",name:"game-over"}}}},{name:"images",parameters:[{name:"idle",$source:{type:"images",scope:"level",name:"flappy-bird-16x16@1x"},frames:[[0,0,16,16],[1,0,16,16],[2,0,16,16]],frame:0,framerate:8,destination:[0,0,0,16,16],opacity:1,elapsed:0}]},{name:"inputs",parameters:[{actions:["CLICK_LEFT","GAMEPAD_A","KEY_SPACE"],state:"DOWN",$command:{type:"snippets",scope:"level",name:"handle-jump"}}]},{name:"position",parameters:{x:32,y:48,z:6}}]}},function(e){e.exports={name:"ceil-pipe",components:[{name:"cameras"},{name:"images",parameters:[{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[1,0,16,16]],frame:0,framerate:8,destination:[0,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[2,0,16,16]],frame:0,framerate:8,destination:[16,0,0,16,16],opacity:1,elapsed:0}]},{name:"position",parameters:{x:0,y:0,z:4}}]}},function(e){e.exports={name:"ceil",components:[{name:"cameras"},{name:"hitbox",parameters:{x:0,y:0,width:160,height:4,type:"danger",collideable:{limit:{type:"snippets",scope:"level",name:"reset-position"}}}},{name:"images",parameters:[{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[0,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[16,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[32,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[48,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[64,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[80,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[96,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[112,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[128,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[144,0,0,16,16],opacity:1,elapsed:0}]},{name:"position",parameters:{x:0,y:0,z:3}}]}},function(e){e.exports={name:"chunk",components:[{name:"cameras"},{name:"hitbox",parameters:{x:0,y:0,width:64,height:16,type:"chunk",collideable:{limit:{type:"snippets",scope:"level",name:"reload-chunk"}}}},{name:"position",parameters:{x:0,y:48,z:0}}]}},function(e){e.exports={name:"clouds",components:[{name:"cameras"},{name:"forces",parameters:[{x:42,y:0,duration:1e3,$easing:{type:"snippets",scope:"common",name:"easing-linear"},$handling:!1,$ending:!1,elapsed:0}]},{name:"hitbox",parameters:{x:0,y:0,width:160,height:16,type:"movable",collideable:{limit:{type:"snippets",scope:"level",name:"reset-position"}}}},{name:"images",parameters:[{name:"idle",$source:{type:"images",scope:"level",name:"clouds-160x16@1x"},frames:[[0,0,160,16]],frame:0,framerate:8,destination:[0,0,0,160,16],opacity:1,elapsed:0}]},{name:"position",parameters:{x:0,y:80,z:1}}]}},function(e){e.exports={name:"floor-pipe",components:[{name:"cameras"},{name:"images",parameters:[{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[1,1,16,16]],frame:0,framerate:8,destination:[0,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[1,2,16,16]],frame:0,framerate:8,destination:[0,16,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[2,2,16,16]],frame:0,framerate:8,destination:[16,16,0,16,16],opacity:1,elapsed:0}]},{name:"position",parameters:{x:0,y:80,z:4}}]}},function(e){e.exports={name:"floor",components:[{name:"cameras"},{name:"hitbox",parameters:{x:0,y:2,width:160,height:14,type:"danger",collideable:{limit:{type:"snippets",scope:"level",name:"reset-position"}}}},{name:"images",parameters:[{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[0,2,16,16]],frame:0,framerate:8,destination:[0,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[0,2,16,16]],frame:0,framerate:8,destination:[16,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[0,2,16,16]],frame:0,framerate:8,destination:[32,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[0,2,16,16]],frame:0,framerate:8,destination:[48,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[0,2,16,16]],frame:0,framerate:8,destination:[64,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[0,2,16,16]],frame:0,framerate:8,destination:[80,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[0,2,16,16]],frame:0,framerate:8,destination:[96,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[0,2,16,16]],frame:0,framerate:8,destination:[112,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[0,2,16,16]],frame:0,framerate:8,destination:[128,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"foreground-16x16@1x"},frames:[[0,2,16,16]],frame:0,framerate:8,destination:[144,0,0,16,16],opacity:1,elapsed:0}]},{name:"position",parameters:{x:0,y:96,z:3}}]}},function(e){e.exports={name:"game-over",components:[{name:"cameras",parameters:[{$camera:{type:"$",name:"hud"},opacity:1}]},{name:"images",parameters:[{name:"idle",$source:{type:"images",scope:"level",name:"game-over-64x64@1x"},frames:[[0,0,64,64]],frame:0,framerate:8,destination:[0,0,0,64,64],opacity:1,elapsed:0}]},{name:"position",parameters:{x:48,y:24,z:0}},{name:"timeout",parameters:{duration:2e3,elapsed:0,$ending:{type:"snippets",scope:"common",name:"restart"}}}]}},function(e){e.exports={name:"hit-score",components:[{name:"cameras"},{name:"hitbox",parameters:{x:0,y:0,width:16,height:144,type:"hit-score",collideable:{player:{type:"snippets",scope:"level",name:"hit-score"}}}},{name:"position"}]}},function(e){e.exports={name:"limit",components:[{name:"cameras"},{name:"forces"},{name:"hitbox",parameters:{x:0,y:0,width:16,height:144,type:"limit",collideable:{}}},{name:"position",parameters:{x:-175,y:0,z:0}}]}},function(e){e.exports={name:"pipe-bottom",components:[{name:"cameras"},{name:"hitbox",parameters:{x:0,y:0,width:16,height:32,type:"danger",collideable:{}}},{name:"images",parameters:[{name:"idle",$source:{type:"images",scope:"level",name:"pipe-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[0,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"pipe-16x16@1x"},frames:[[0,1,16,16]],frame:0,framerate:8,destination:[0,16,0,16,16],opacity:1,elapsed:0}]},{name:"position",parameters:{x:0,y:80,z:2}}]}},function(e){e.exports={name:"pipe-shadow",components:[{name:"cameras"},{name:"images",parameters:[{name:"idle",$source:{type:"images",scope:"level",name:"pipe-shadow-16x8@1x"},frames:[[0,1,16,8]],frame:0,framerate:8,destination:[0,0,0,16,8],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"pipe-shadow-16x8@1x"},frames:[[0,2,16,8]],frame:0,framerate:8,destination:[0,8,0,16,8],opacity:1,elapsed:0}]},{name:"position",parameters:{x:0,y:104,z:2}}]}},function(e){e.exports={name:"pipe-top",components:[{name:"cameras"},{name:"hitbox",parameters:{x:0,y:0,width:16,height:48,type:"danger",collideable:{}}},{name:"images",parameters:[{name:"idle",$source:{type:"images",scope:"level",name:"pipe-16x16@1x"},frames:[[0,1,16,16]],frame:0,framerate:8,destination:[0,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"pipe-16x16@1x"},frames:[[0,1,16,16]],frame:0,framerate:8,destination:[0,16,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"pipe-16x16@1x"},frames:[[0,2,16,16]],frame:0,framerate:8,destination:[0,32,0,16,16],opacity:1,elapsed:0}]},{name:"position",parameters:{x:0,y:0,z:2}}]}},function(e){e.exports={name:"score",components:[{name:"cameras",parameters:[{$camera:{type:"$",name:"hud"},opacity:1}]},{name:"images",parameters:[{name:"idle",$source:{type:"images",scope:"level",name:"numbers-8x16@1x"},frames:[[0,0,8,16]],frame:0,framerate:8,destination:[0,0,0,8,16],opacity:1,elapsed:0}]},{name:"position",parameters:{x:76,y:12,z:0}}]}},function(e){e.exports={name:"touch-screen",components:[{name:"cameras",parameters:[{$camera:{type:"$",name:"hud"},opacity:1}]},{name:"images",parameters:[{name:"idle",$source:{type:"images",scope:"level",name:"touch-screen-64x32@1x"},frames:[[0,0,64,32]],frame:0,framerate:8,destination:[0,0,0,64,32],opacity:1,elapsed:0}]},{name:"inputs",parameters:[{actions:["CLICK_LEFT","GAMEPAD_A","KEY_SPACE"],state:"DOWN",$command:{type:"snippets",scope:"level",name:"start-game"}}]},{name:"position",parameters:{x:48,y:40,z:0}}]}},function(e){e.exports={name:"waves",components:[{name:"cameras"},{name:"forces",parameters:[{x:-16,y:0,duration:1e3,$easing:{type:"snippets",scope:"common",name:"easing-linear"},$handling:!1,$ending:!1,elapsed:0}]},{name:"hitbox",parameters:{x:0,y:0,width:160,height:16,type:"movable",collideable:{limit:{type:"snippets",scope:"level",name:"reset-position"}}}},{name:"images",parameters:[{name:"idle",$source:{type:"images",scope:"level",name:"waves-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[0,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"waves-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[16,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"waves-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[32,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"waves-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[48,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"waves-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[64,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"waves-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[80,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"waves-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[96,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"waves-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[112,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"waves-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[128,0,0,16,16],opacity:1,elapsed:0},{name:"idle",$source:{type:"images",scope:"level",name:"waves-16x16@1x"},frames:[[0,0,16,16]],frame:0,framerate:8,destination:[144,0,0,16,16],opacity:1,elapsed:0}]},{name:"position",parameters:{x:0,y:96,z:5}}]}},function(e,t,n){var r={"./level/start.json":63};function i(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=62},function(e){e.exports=[{name:"limit",entity:{scope:"level",name:"limit"}},{name:"background",entity:{scope:"level",name:"background"}},{name:"clouds-1",entity:{scope:"level",name:"clouds"}},{name:"clouds-2",entity:{scope:"level",name:"clouds"},components:[{name:"position",parameters:{x:160}}]},{name:"ceil-1",entity:{scope:"level",name:"ceil"}},{name:"ceil-2",entity:{scope:"level",name:"ceil"},components:[{name:"position",parameters:{x:160}}]},{name:"floor-1",entity:{scope:"level",name:"floor"}},{name:"floor-2",entity:{scope:"level",name:"floor"},components:[{name:"position",parameters:{x:160}}]},{name:"waves-1",entity:{scope:"level",name:"waves"}},{name:"waves-2",entity:{scope:"level",name:"waves"},components:[{name:"position",parameters:{x:160}}]},{name:"bird",entity:{scope:"level",name:"bird"}},{name:"touch-screen",entity:{scope:"level",name:"touch-screen"}},{name:"score",entity:{scope:"level",name:"score"}}]},function(e,t,n){var r={"./level/index.js":65,"./loading/index.js":66};function i(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=64},function(e,t,n){"use strict";n.r(t),function(e){var r=n(5);n.d(t,"after",function(){return r.a});var i=n(6);n.d(t,"before",function(){return i.a});var o=n(7);n.d(t,"destroy",function(){return o.a});var a=n(8);n.d(t,"panic",function(){return a.a});var s=n(9);n.d(t,"render",function(){return s.a});var c=n(10);n.d(t,"resize",function(){return c.a});var l=n(22);n.d(t,"setup",function(){return l.a});var u=n(11);n.d(t,"start",function(){return u.a});var f=n(12);n.d(t,"update",function(){return f.a}),void 0!==e.hot&&e.hot.accept(["./after.js","./before.js","./destroy.js","./panic.js","./render.js","./resize.js","./setup.js","./start.js","./update.js"])}.call(this,n(4)(e))},function(e,t,n){"use strict";n.r(t),function(e){var r=n(13);n.d(t,"after",function(){return r.a});var i=n(14);n.d(t,"before",function(){return i.a});var o=n(15);n.d(t,"destroy",function(){return o.a});var a=n(16);n.d(t,"panic",function(){return a.a});var s=n(17);n.d(t,"render",function(){return s.a});var c=n(18);n.d(t,"resize",function(){return c.a});var l=n(19);n.d(t,"setup",function(){return l.a});var u=n(20);n.d(t,"start",function(){return u.a});var f=n(21);n.d(t,"update",function(){return f.a}),void 0!==e.hot&&e.hot.accept(["./after.js","./before.js","./destroy.js","./panic.js","./render.js","./resize.js","./setup.js","./start.js","./update.js"])}.call(this,n(4)(e))},function(e,t,n){var r={"./common/easing-in-quart.js":68,"./common/easing-linear.js":69,"./common/easing-out-cubic.js":70,"./common/easing-sine-half.js":71,"./common/easing-sine.js":72,"./common/handle-command.js":73,"./common/handle-fade-ending.js":74,"./common/handle-forces-ending.js":75,"./common/handle-hitbox.js":76,"./common/handle-state.js":77,"./common/handle-timeout-ending.js":78,"./common/remove-entity.js":79,"./common/remove-fade.js":80,"./common/remove-forces.js":81,"./common/remove-hitbox.js":82,"./common/remove-timeout.js":83,"./common/restart.js":84,"./common/setup-camera.js":111,"./common/setup-world.js":110,"./level/add-chunk.js":109,"./level/best-score.js":85,"./level/game-over.js":86,"./level/handle-jump.js":87,"./level/hit-score.js":88,"./level/reload-chunk.js":89,"./level/reset-position.js":90,"./level/start-game.js":91};function i(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=67},function(e,t,n){"use strict";n.r(t);var r=n(1);t.default=function(){return r.a}},function(e,t,n){"use strict";n.r(t);var r=n(1);t.default=function(){return Object(r.d)(1)}},function(e,t,n){"use strict";n.r(t);var r=n(1);t.default=function(){return r.c}},function(e,t,n){"use strict";n.r(t),t.default=function(){return function(e){return Math.sin(Math.PI*e)}}},function(e,t,n){"use strict";n.r(t),t.default=function(){return function(e){return Math.sin(2*Math.PI*e)}}},function(e,t,n){"use strict";n.r(t),t.default=function(e,t){console.log("debugging :","component","'command'"),console.log(t),console.log("debugging :","entity","'"+e.name+"'"),console.log(e)}},function(e,t,n){"use strict";n.r(t),t.default=function(e,t){console.log("debugging :","component","'fade'","(ending)"),console.log(t),console.log("debugging :","entity","'"+e.name+"'"),console.log(e),this.snippets.common["remove-fade"](e)}},function(e,t,n){"use strict";n.r(t),t.default=function(e,t){console.log("debugging :","component","'forces'","(ending)"),console.log(t),console.log("debugging :","entity","'"+e.name+"'"),console.log(e)}},function(e,t,n){"use strict";n.r(t),t.default=function(e,t){!1===e.has("forces")&&e.add({name:"forces",parameters:[]}),!1===e.has("velocity")&&e.add({name:"velocity",parameters:{top:0,right:0,bottom:0,left:0}});var n=e.get("forces"),r=e.get("velocity"),i=[];!0===t.from.top&&(r.bottom=Math.max(r.bottom,t.delta.top),i=n.filter(function(e){return e.y>=0})),!0===t.from.right&&(r.left=Math.max(r.left,t.delta.right),i=n.filter(function(e){return e.x<=0})),!0===t.from.bottom&&(r.top=Math.max(r.top,t.delta.bottom),i=n.filter(function(e){return e.y<=0})),!0===t.from.left&&(r.right=Math.max(r.right,t.delta.left),i=n.filter(function(e){return e.x>=0})),e.add({name:"forces",parameters:i})}},function(e,t,n){"use strict";n.r(t),t.default=function(e,t){console.log("debugging :","component","'state'"),console.log(t),console.log("debugging :","entity","'"+e.name+"'"),console.log(e)}},function(e,t,n){"use strict";n.r(t),t.default=function(e,t){console.log("debugging :","component","'timeout'","(ending)"),console.log(t),console.log("debugging :","entity","'"+e.name+"'"),console.log(e),this.snippets.common["remove-timeout"](e)}},function(e,t,n){"use strict";n.r(t),t.default=function(e){this.$.world.remove(e)}},function(e,t,n){"use strict";n.r(t),t.default=function(e){e.remove("fade")}},function(e,t,n){"use strict";n.r(t),t.default=function(e){e.remove("forces")}},function(e,t,n){"use strict";n.r(t),t.default=function(e,t){e.remove("hitbox")}},function(e,t,n){"use strict";n.r(t),t.default=function(e){e.remove("timeout")}},function(e,t,n){"use strict";n.r(t),t.default=function(){this.restart()}},function(e,t,n){"use strict";n.r(t),t.default=function(){for(var e=this.$.world.prepare(this.entities.level["best-score"]()),t=""+this.$.best,n=t.length,r=[{name:"best",$source:{type:"images",scope:"level",name:"best-48x16@1x"},frames:[[0,0,48,16]],frame:0,framerate:8,destination:[0,0,0,48,16],opacity:1,elapsed:0}],i=0;i<n;i+=1){var o={name:"idle",$source:{type:"images",scope:"level",name:"numbers-blue-8x16@1x"},frames:[[parseInt(t[i],10),0,8,16]],frame:0,framerate:8,destination:[156-8*(n-i),0,0,8,16],opacity:1,elapsed:0};r.push(o)}e.add({name:"images",parameters:r}),this.$.world.attach(e)}},function(e,t,n){"use strict";n.r(t),t.default=function(e,t){e.remove(["forces","hitbox","inputs"]),!1===e.has("velocity")&&e.add({name:"velocity",parameters:{top:0,right:0,bottom:0,left:0}});var n=e.get("velocity");!0===t.from.top&&(n.bottom=t.delta.top),!0===t.from.right&&(n.left=t.delta.right),!0===t.from.bottom&&(n.top=t.delta.bottom),!0===t.from.left&&(n.right=t.delta.left),e.add({name:"forces",parameters:[{x:!0===t.from.right?-24:24,y:0,duration:1e3,$easing:{type:"snippets",scope:"common",name:"easing-linear"},$handling:!1,$ending:!1,elapsed:0},{x:0,y:-16,duration:200,$easing:{type:"snippets",scope:"common",name:"easing-out-cubic"},$handling:!1,$ending:!0,elapsed:0},{x:0,y:16,duration:400,$easing:{type:"snippets",scope:"common",name:"easing-in-quart"},$handling:!1,$ending:!1,elapsed:0}]}),this.$.camera.shake(4,4,200),this.$.hud.shake(2,2,200),this.assets.sounds.level.explode().play(),this.$.world.add(this.entities.level["game-over"]())}},function(e,t,n){"use strict";n.r(t),t.default=function(e){e.add({name:"forces",parameters:[{x:48,y:0,duration:1e3,$easing:{type:"snippets",scope:"common",name:"easing-linear"},$handling:!1,$ending:!1,elapsed:0},{x:0,y:-12,duration:200,$easing:{type:"snippets",scope:"common",name:"easing-out-cubic"},$handling:!1,$ending:!0,elapsed:0},{x:0,y:144,duration:1e3,$easing:{type:"snippets",scope:"common",name:"easing-in-quart"},$handling:!1,$ending:!1,elapsed:0}]}),this.assets.sounds.level.jump().play()}},function(e,t,n){"use strict";n.r(t);var r=n(3);t.default=function(e){this.$.score+=1,this.$.score>this.$.best&&(this.$.best=this.$.score,r.b("best",this.$.best),this.snippets.level["best-score"]()),e.get("position").x+=64;for(var t=this.$.world.get("score"),n=""+this.$.score,i=n.length,o=[],a=0;a<i;a+=1){var s={name:"idle",$source:{type:"images",scope:"level",name:"numbers-8x16@1x"},frames:[[parseInt(n[a],10),0,8,16]],frame:0,framerate:8,destination:[8*a-4*(i-1),0,0,8,16],opacity:1,elapsed:0};o.push(s)}t.add({name:"images",parameters:o}),this.assets.sounds.level.score().play()}},function(e,t,n){"use strict";n.r(t),t.default=function(e,t){this.snippets.level["reset-position"](e);var n=e.name.match(/^[a-z-]+([0-9]+)$/)[1];this.snippets.level["add-chunk"](n,e.get("position").x)}},function(e,t,n){"use strict";n.r(t),t.default=function(e){e.get("position").x+=320}},function(e,t,n){"use strict";n.r(t),t.default=function(e){this.snippets.common["remove-entity"](e);var t=16*Math.ceil(this.$.world.get("background").get("position").x/16)+160,n=this.$.world.prepare(this.entities.level["hit-score"]());n.name="hit-score",n.get("position").x=t+32,this.$.world.attach(n);for(var r=1;r<6;r+=1){var i=this.$.world.prepare(this.entities.level.chunk());i.name="chunk-"+r,i.get("position").x=t+64*(r-1),this.$.world.attach(i),this.snippets.level["add-chunk"](r,i.get("position").x)}}},function(e,t,n){var r={"./common/commands.js":93,"./common/fade.js":94,"./common/forces.js":95,"./common/hitbox.js":96,"./common/images.js":97,"./common/inputs.js":98,"./common/previous.js":99,"./common/spritesheets.js":100,"./common/state.js":101,"./common/timeout.js":102,"./common/velocity.js":103,"./debug/camera.js":104,"./debug/hitbox.js":105,"./debug/inputs.js":106,"./debug/pause.js":107,"./debug/spritesheet.js":108};function i(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=92},function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e){var t=this;Object.entries(e).forEach(function(e){var n=i(e,2),o=(n[0],n[1]);o.get("commands").forEach(function(e){var n=e.$command,i=e.parameters;t.snippets[n.scope][n.name].apply(void 0,[o].concat(r(i)))}),o.remove("commands")})}n.r(t),n.d(t,"commands",function(){return s})},function(e,t,n){"use strict";n.r(t),n.d(t,"fade",function(){return a});var r=n(1);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){var t=this;Object.entries(e).forEach(function(e){var n=i(e,2),o=(n[0],n[1]),a=o.get("fade");!1===o.has("opacity")&&o.add({name:"opacity",parameters:{opacity:1}});var s=o.get("opacity");void 0===a.fade&&(a.fade=a.opacity-s.opacity),void 0===a.faded&&(a.faded=0);var c=a.$easing,l=!1!==a.$easing?t.snippets[c.scope][c.name]():r.d(1),u=a.duration-a.elapsed,f=t.delta>u?u:t.delta,m=(a.elapsed+f)/a.duration,p=a.fade*l(m);if(s.opacity+=p-a.faded,a.faded=p,a.elapsed+=f,a.elapsed>=a.duration&&!1!==a.$ending){var d=a.$ending;(0,t.snippets[d.scope][d.name])(o,t.delta-f)}})}},function(e,t,n){"use strict";n.r(t),n.d(t,"forces",function(){return s});var r=n(1);function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e){var t=this;Object.entries(e).forEach(function(e){var n=o(e,2),a=(n[0],n[1]),s=a.get("forces");!1===a.has("velocity")&&a.add({name:"velocity",parameters:{top:0,right:0,bottom:0,left:0}});var c=a.get("velocity"),l=[];s.forEach(function(e){var n=!1===e.$ending,o=e.duration-e.elapsed,s=!1===n&&t.delta>o?o:t.delta,u=(e.elapsed+s)/e.duration,f=e.$easing,m=!1!==e.$easing?t.snippets[f.scope][f.name]():r.d(1);void 0===e.moved&&(e.moved={x:0,y:0});var p={x:e.x*m(u),y:e.y*m(u)},d=p.y-e.moved.y<0?Math.abs(p.y-e.moved.y):0,h=Math.max(p.x-e.moved.x,0),y=Math.max(p.y-e.moved.y,0),g=p.x-e.moved.x<0?Math.abs(p.x-e.moved.x):0;if(c.top=Math.max(c.top,d),c.right=Math.max(c.right,h),c.bottom=Math.max(c.bottom,y),c.left=Math.max(c.left,g),e.moved=p,e.elapsed+=t.delta,!1!==e.$handling){var v=e.$handling;(0,t.snippets[v.scope][v.name])(a,e.moved.x,e.moved.y,e.elapsed,function(){l.push(e)})}if(e.elapsed>=e.duration&&!1!==e.$ending&&-1===l.indexOf(e)){if("object"===i(e.$ending)){var x=e.$ending,b=t.snippets[x.scope][x.name],w=e.elapsed-e.duration;b(a,w)}l.push(e)}});var u=s.filter(function(e){return-1===l.indexOf(e)});0===u.length?a.remove("forces"):a.add({name:"forces",parameters:u})})}},function(e,t,n){"use strict";n.r(t),n.d(t,"hitbox",function(){return s});var r=n(2),i=n(0);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e){var t=this,n=[];Object.entries(e).forEach(function(a){var s=o(a,2),c=s[0],l=s[1],u=l.get("hitbox"),f=l.get("position"),m=u.collideable,p=Object.keys(m);Object.entries(e).forEach(function(e){var a=o(e,2),s=a[0],d=a[1];if(c!==s){var h=d.get("hitbox"),y=d.get("position");if(-1!==p.indexOf(h.type)){var g=new i.b(f.x+u.x,f.y+u.y,u.width,u.height),v=new i.b(y.x+h.x,y.y+h.y,h.width,h.height);if(!0===Object(r.a)(g,v)){var x={top:g.y>v.y&&g.y<v.y+v.height?v.height-(g.y-v.y):0,right:g.x+g.width>v.x&&g.x+g.width<v.x+v.width?g.x+g.width-v.x:0,bottom:g.y+g.height>v.y&&g.y+g.height<v.y+v.height?g.y+g.height-v.y:0,left:g.x>v.x&&g.x<v.x+v.width?v.width-(g.x-v.x):0},b=l.get("previous").position,w=d.get("previous").position,$=l.get("previous").hitbox,j=d.get("previous").hitbox,O=new i.b(b.x+$.x,b.y+$.y,$.width,$.height),S=new i.b(w.x+j.x,w.y+j.y,j.width,j.height),A=!(O.x+O.width-1<S.x||O.x>S.x+S.width-1),E=!(O.y+O.height-1<S.y||O.y>S.y+S.height-1),M=!0===A&&!1===E&&O.y>g.y,k=!0===E&&!1===A&&O.x<g.x,I=!0===A&&!1===E&&O.y<g.y,T=!0===E&&!1===A&&O.x>g.x;!1===A&&!1===E&&(x.top>0&&(x.top<=x.right||x.top<=x.left)?M=!0:x.right>0&&(x.right<=x.top||x.right<=x.bottom)?k=!0:x.bottom>0&&(x.bottom<=x.right||x.bottom<=x.left)?I=!0:x.left>0&&(x.left<=x.bottom||x.left<=x.top)&&(T=!0));var z={delta:x,from:{top:M,right:k,bottom:I,left:T}},L=m[h.type],C=L.scope,D=L.name;n.push(t.snippets[C][D].bind(t,l,z))}}}})}),n.forEach(function(e){e()})}},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){var t=this;Object.entries(e).forEach(function(e){var n=r(e,2),i=(n[0],n[1]),o=i.get("cameras"),a=i.get("images"),s=i.get("position");o.forEach(function(e){var n=t.$[e.$camera.name];a.forEach(function(o){var a,c=o.destination,l=o.frames,u=o.opacity,f=o.$source,m=r(l[o.frame],4),p=m[0],d=m[1],h=m[2],y=m[3];try{a=t.assets[f.type][f.scope][f.name]()}catch(e){p%=8,d%=1,h=1,y=1,a=t.assets.images.common["placeholder-8x1"]()}n.add({source:a,frame:{x:h*p,y:y*d,width:h,height:y},destination:{x:s.x+c[0],y:s.y+c[1],z:s.z+c[2],width:c[3],height:c[4]},opacity:e.opacity*u*(i.has("opacity")?i.get("opacity").opacity:1)})})})})}n.r(t),n.d(t,"images",function(){return o})},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){var t=this;Object.entries(e).forEach(function(e){var n=r(e,2),i=(n[0],n[1]);t.$.controllers.inputs.forEach(function(e){i.get("inputs").forEach(function(t){if(!0===Array.isArray(t.actions)&&-1!==t.actions.indexOf(e.action)&&t.state===e.state){var n={$command:t.$command,parameters:[e]};!0===i.has("commands")?i.get("commands").push(n):i.add({name:"commands",parameters:[n]})}})})})}n.r(t),n.d(t,"inputs",function(){return o})},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){Object.entries(e).forEach(function(e){var t=r(e,2),n=(t[0],t[1]),i={};!0===n.has("position")&&(i.position=JSON.parse(JSON.stringify(n.get("position")))),!0===n.has("hitbox")&&(i.hitbox=JSON.parse(JSON.stringify(n.get("hitbox"))));var o={name:"previous",parameters:i};n.add(o)})}n.r(t),n.d(t,"previous",function(){return o})},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){var t=this;Object.entries(e).forEach(function(e){var n=r(e,2);n[0];n[1].get("images").forEach(function(e){var n=e.framerate,r=e.frames;if(r.length>1){e.elapsed+=t.delta;for(var i=1e3/n;e.elapsed>=i;)e.elapsed-=i,e.frame=e.frame===r.length-1?0:e.frame+1}})})}n.r(t),n.d(t,"spritesheets",function(){return o})},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){var t=this;Object.entries(e).forEach(function(e){var n=r(e,2),i=(n[0],n[1]),o=i.get("state"),a=o.changes;if(a.length>0){var s=o.$handling,c=t.snippets[s.scope][s.name];o.changes=[],c(i,a)}})}n.r(t),n.d(t,"state",function(){return o})},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){var t=this;Object.entries(e).forEach(function(e){var n=r(e,2),i=(n[0],n[1]),o=i.get("timeout");if(o.elapsed+=t.delta,o.elapsed>=o.duration&&!1!==o.$ending){var a=o.$ending;(0,t.snippets[a.scope][a.name])(i,o.elapsed-o.duration)}})}n.r(t),n.d(t,"timeout",function(){return o})},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){Object.entries(e).forEach(function(e){var t=r(e,2),n=(t[0],t[1]),i=n.get("position"),o=n.get("velocity");i.x+=o.right-o.left,i.y+=o.bottom-o.top,o.top=0,o.right=0,o.bottom=0,o.left=0})}n.r(t),n.d(t,"velocity",function(){return o})},function(e,t,n){"use strict";function r(e){var t=this.$.camera,n=2*t.screen.scale(),r=2*n,i=n/2;this.context.save(),this.context.lineWidth=n,this.context.font="bold "+r+"px Courier New",this.context.textAlign="start",this.context.textBaseline="top",this.context.fillStyle="#d95763",this.context.fillText("camera '"+t.name+"'",t.screen.x()+t.screen.width()-r-this.context.measureText("camera '"+t.name+"'").width,t.screen.y()+r),this.context.strokeStyle="#d95763",this.context.strokeRect(this.$.camera.screen.x()+i,this.$.camera.screen.y()+i,this.$.camera.screen.width()-n,this.$.camera.screen.height()-n),this.context.restore()}n.r(t),n.d(t,"camera",function(){return r})},function(e,t,n){"use strict";n.r(t),n.d(t,"hitbox",function(){return a});var r=n(0);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){var t=this;Object.entries(e).forEach(function(e){var n=i(e,2),o=(n[0],n[1]),a=o.get("cameras"),s=o.get("hitbox"),c=o.get("position");a.forEach(function(e){var n=t.$[e.$camera.name],i=new r.b(n.screen.x()+(c.x+s.x)*n.screen.scale()-(n.position.x()*n.screen.scale()-n.screen.width()/2+n.shaking.shift.x*n.screen.scale()),n.screen.y()+(c.y+s.y)*n.screen.scale()-(n.position.y()*n.screen.scale()-n.screen.height()/2+n.shaking.shift.y*n.screen.scale()),s.width*n.screen.scale(),s.height*n.screen.scale()),o=1*n.screen.scale(),a=o/2;t.context.save(),t.context.fillStyle="rgba(106, 190, 48, 0.2)",t.context.fillRect(i.x,i.y,i.width,i.height),t.context.lineWidth=o,t.context.strokeStyle="#6abe30",t.context.strokeRect(i.x+a,i.y+a,i.width-o,i.height-o),t.context.restore()})})}},function(e,t,n){"use strict";function r(e){var t=this;this.$.controllers.inputs.forEach(function(e){"KEYBOARD"===e.type&&"KEY_SHIFT"===e.action&&"DOWN"===e.state?(console.log("debugging :","restart game","("+t.loop.framerate+"fps @"+t.loop.speed+"x)"),t.restart()):"KEYBOARD"===e.type&&"KEY_SPACE"===e.action&&"DOWN"===e.state?!1===t.playing?(console.log("debugging :","play game","("+t.loop.framerate+"fps @"+t.loop.speed+"x)"),t.play()):!0===t.playing&&(console.log("debugging :","pause game","("+t.loop.framerate+"fps @"+t.loop.speed+"x)"),t.pause()):"KEYBOARD"===e.type&&"KEY_ENTER"===e.action&&"DOWN"===e.state?(console.log("debugging :","tick game","("+Math.round(100*t.delta)/100+"ms @"+t.loop.speed+"x)"),t.tick()):"MOUSE"===e.type&&"MOVE"===e.action&&(t.$.debugging.x=e.x,t.$.debugging.y=e.y)})}n.r(t),n.d(t,"inputs",function(){return r})},function(e,t,n){"use strict";function r(e){if(!1===this.playing){this.context.save();this.context.lineWidth=8,this.context.fillStyle="black",this.context.fillRect(16,16,64,64),this.context.strokeStyle="white",this.context.beginPath(),this.context.moveTo(40,32),this.context.lineTo(40,64),this.context.moveTo(56,32),this.context.lineTo(56,64),this.context.stroke(),this.context.restore()}}n.r(t),n.d(t,"pause",function(){return r})},function(e,t,n){"use strict";n.r(t),n.d(t,"spritesheet",function(){return s});var r=n(2),i=n(0);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e){var t=this,n={z:0,camera:null,entity:null,spritesheet:null};if(Object.entries(e).forEach(function(e){var a=o(e,2),s=(a[0],a[1]);s.get("images").forEach(function(e){var o=s.get("cameras"),a=s.get("position");o.forEach(function(o){var c=t.$[o.$camera.name],l={x:a.x+e.destination[0],y:a.y+e.destination[1],z:a.z+e.destination[2],width:e.destination[3],height:e.destination[4]},u=new i.a(t.$.debugging.x,t.$.debugging.y),f=new i.b(c.screen.x()+l.x*c.screen.scale()-(c.position.x()*c.screen.scale()-c.screen.width()/2+c.shaking.shift.x*c.screen.scale()),c.screen.y()+l.y*c.screen.scale()-(c.position.y()*c.screen.scale()-c.screen.height()/2+c.shaking.shift.y*c.screen.scale()),l.width*c.screen.scale(),l.height*c.screen.scale()),m=new i.b(c.screen.x(),c.screen.y(),c.screen.width(),c.screen.height());"number"==typeof t.$.debugging.x&&"number"==typeof t.$.debugging.y&&l.z>=n.z&&!0===Object(r.a)(u,f)&&!0===Object(r.a)(u,m)&&(n.z=l.z,n.camera=c,n.entity=s,n.spritesheet={name:e.name,x:f.x,y:f.y,z:l.z,width:f.width,height:f.height}),t.$.controllers.inputs.forEach(function(t){if("MOUSE"===t.type&&"CLICK_LEFT"===t.action&&"DOWN"===t.state){var n=new i.a(t.x,t.y);!0===Object(r.a)(n,f)&&!0===Object(r.a)(n,m)&&(console.log("debugging :","entity","'"+s.name+"'","/","spritesheet","'"+e.name+"'","/","camera","'"+c.name+"'"),console.log(s))}})})})}),null!==n.entity){var a=n.camera,s=n.entity,c=n.spritesheet,l=2*a.screen.scale(),u=2*l;this.context.save(),this.context.lineWidth=l,this.context.font="bold "+u+"px Courier New",this.context.textAlign="start",this.context.textBaseline="top",this.context.fillStyle="black";var f=this.context.measureText("entity '"+s.name+"'").width;c.height>=2*u&&(f=Math.max(this.context.measureText("entity '"+s+"'").width,this.context.measureText("spritesheet '"+c.name+"'").width)),this.context.fillRect(c.x+c.width,c.y-u,f+2*u,c.height+2*u),this.context.fillRect(c.x-u,c.y-u,c.width+u,u),this.context.fillRect(c.x-u,c.y,u,c.height),this.context.fillRect(c.x-u,c.y+c.height,c.width+u,u),this.context.fillStyle="white",c.height>=1*u&&this.context.fillText("entity '"+s.name+"'",c.x+c.width+u,c.y+0*u),c.height>=2*u&&this.context.fillText("spritesheet '"+c.name+"'",c.x+c.width+u,c.y+1*u),c.height>=3*u&&this.context.fillText("camera '"+n.camera.name+"'",c.x+c.width+u,c.y+2*u),this.context.restore(),this.$.controllers.inputs.forEach(function(e){"KEYBOARD"===e.type&&"KEY_DELETE"===e.action&&"DOWN"===e.state&&t.$.world.remove(n.entity)})}}},function(e,t,n){"use strict";n.r(t);t.default=function(e,t){var n=function(e){return"number"==typeof e&&e%1==0&&e>0?Math.floor(e*Math.random()):Array.isArray(e)&&e.length>0?e[Math.floor(e.length*Math.random())]:null}(3),r=this.$.world.prepare(this.entities.level["pipe-top"]());r.name="pipe-top-"+e,r.get("position").x=t,r.get("position").y=0-16*n,this.$.world.attach(r);var i=this.$.world.prepare(this.entities.level["ceil-pipe"]());i.name="ceil-pipe-"+e,i.get("position").x=t,this.$.world.attach(i);var o=this.$.world.prepare(this.entities.level["pipe-bottom"]());o.name="pipe-bottom-"+e,o.get("position").x=t,o.get("position").y=80-16*Math.min(n,1),this.$.world.attach(o);var a=this.$.world.prepare(this.entities.level["floor-pipe"]());a.name="floor-pipe-"+e,a.get("position").x=t,this.$.world.attach(a);var s=this.$.world.prepare(this.entities.level["pipe-shadow"]());s.name="pipe-shadow-"+e,s.get("position").x=t,s.get("position").y=104+8*Math.min(n,1),this.$.world.attach(s)}},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){this.entities={},this.systems={},this.add=function(e){var t=this;!1===Array.isArray(e)&&(e=[e]),e.forEach(function(e){t.entities[e.name]=t.prepare(e)})},this.attach=function(e){var t=this;!1===Array.isArray(e)&&(e=[e]),e.forEach(function(e){t.entities[e.name]=e})},this.empty=function(){this.entities={}},this.get=function(e){return this.entities[e]},this.initialize=function(e){this.empty(),this.add(e)},this.prepare=function(e){return new function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;this.components={},this.name=e,this.add=function(e){var t=this;!1===Array.isArray(e)&&(e=[e]),e.forEach(function(e){var i=e.name,a=e.parameters,s=n();if(i in s){var c=s[i]();!0===t.has(i)?(c=t.get(i),"object"===o(a)&&Object.entries(a).forEach(function(e){var t=r(e,2),n=t[0],i=t[1];c[n]=i})):void 0!==a&&(c=a),t.components[i]=c}})},this.empty=function(){this.components={}},this.get=function(e){return this.components[e]},this.has=function(e){!1===Array.isArray(e)&&(e=[e]);for(var t=0,n=e.length;t<n;t+=1){var r=e[t],i=r.replace("not:",""),o=r!==i;if(this.components.hasOwnProperty(i)===o)return!1}return!0},this.initialize=function(e){this.empty(),this.add(e)},this.remove=function(e){!1===Array.isArray(e)&&(e=[e]);for(var t=0,n=e.length;t<n;t+=1){var r=e[t];!0===this.components.hasOwnProperty(r)&&delete this.components[r]}},this.add(t)}(e.name,e.components,t)},this.remove=function(e){!1===Array.isArray(e)&&(e=[e]);for(var t=0,n=e.length;t<n;t+=1){var r=e[t],i=r.name||r;!0===this.entities.hasOwnProperty(i)&&delete this.entities[i]}},this.system=function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.entities,a={};Object.entries(o).forEach(function(e){var t=r(e,2),i=t[0],o=t[1];!0===o.has(n)&&(a[i]=o)}),this.systems[t]={components:n,entities:a},i.call(e,a)}}n.r(t);t.default=function(){var e=this;return new a(this,function(){return e.components})}},function(e,t,n){"use strict";n.r(t);var r=n(1);function i(e,t,n){var i=[];this.name=t,this.position={x:function(){return 0},y:function(){return 0}},this.screen={x:n.x,y:n.y,width:n.width,height:n.height,scale:n.scale,opacity:n.opacity},this.shaking={current:!1,duration:0,easing:null,elapsed:0,force:{x:0,y:0},shift:{x:0,y:0}},this.add=function(e){for(var t=0,n=i.length-1;n>=0;n-=1){var r=i[n];if(e.destination.z>r.destination.z||e.destination.z===r.destination.z&&e.destination.y>=r.destination.y){t=n+1;break}}i.splice(t,0,e)},this.clean=function(){i=[]},this.idle=function(){this.shaking={current:!1,duration:0,easing:null,elapsed:0,force:{x:0,y:0},shift:{x:0,y:0}}},this.look=function(e,t){this.position.x=e,this.position.y=t},this.render=function(){var t=this;0!==this.screen.opacity&&i.forEach(function(n){var r=n.destination,i=n.frame,o=n.opacity,a=n.source,s=t.visible(r.x*t.screen.scale(),r.y*t.screen.scale(),r.width*t.screen.scale(),r.height*t.screen.scale());if(o>0&&!0===s){var c=e.globalAlpha;e.globalAlpha=o*t.screen.opacity;var l={destination:{x:t.screen.x()+r.x*t.screen.scale()-(t.position.x()*t.screen.scale()-t.screen.width()/2+t.shaking.shift.x*t.screen.scale()),y:t.screen.y()+r.y*t.screen.scale()-(t.position.y()*t.screen.scale()-t.screen.height()/2+t.shaking.shift.y*t.screen.scale()),width:r.width*t.screen.scale(),height:r.height*t.screen.scale()}},u={top:Math.min(0,l.destination.y-t.screen.y()),right:Math.max(0,l.destination.x+l.destination.width-(t.screen.x()+t.screen.width())),bottom:Math.max(0,l.destination.y+l.destination.height-(t.screen.y()+t.screen.height())),left:Math.min(0,l.destination.x-t.screen.x())};e.drawImage(a,i.x-u.left*(i.width/l.destination.width),i.y-u.top*(i.height/l.destination.height),i.width-u.right*(i.width/l.destination.width)-Math.abs(u.left*(i.width/l.destination.width)),i.height-u.bottom*(i.height/l.destination.height)-Math.abs(u.top*(i.height/l.destination.height)),l.destination.x-u.left,l.destination.y-u.top,l.destination.width-u.right-Math.abs(u.left),l.destination.height-u.bottom-Math.abs(u.top)),e.globalAlpha=c}})},this.shake=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.e(r.b(2));this.idle(),this.shaking.force={x:e,y:t},this.shaking.current=!0,this.shaking.duration=n,this.shaking.easing=i},this.update=function(e){if(!1!==this.shaking.current)if(this.shaking.elapsed+e>=this.shaking.duration)this.idle();else{this.shaking.elapsed+=e;var t=this.shaking.easing(this.shaking.elapsed/this.shaking.duration),n=2*Math.random()*Math.PI;this.shaking.shift.x=Math.round(Math.cos(n)*this.shaking.force.x*t),this.shaking.shift.y=Math.round(Math.sin(n)*this.shaking.force.y*t)}},this.visible=function(e,t,n,r){var i=this.position.x()*this.screen.scale()-this.screen.width()/2+this.shaking.shift.x*this.screen.scale(),o=this.position.y()*this.screen.scale()-this.screen.height()/2+this.shaking.shift.y*this.screen.scale(),a=this.screen.width(),s=this.screen.height();return!(e+n<=i||e>=i+a||t+r<=o||t>=o+s)}}t.default=function(e,t,n,r,o){var a=this,s=function(){return Math.min(a.size.width/n,a.size.height/r)};switch(t){case"contain-frameless":return new i(this.context,e,{x:function(){return 0},y:function(){return 0},width:function(){return a.size.width},height:function(){return a.size.height},scale:s,opacity:o});case"contain-framed":return new i(this.context,e,{x:function(){return(a.size.width-n*s())/2},y:function(){return(a.size.height-r*s())/2},width:function(){return n*s()},height:function(){return r*s()},scale:s,opacity:o});case"cover":return s=function(){return Math.max(a.size.width/n,a.size.height/r)},new i(this.context,e,{x:function(){return 0},y:function(){return 0},width:function(){return a.size.width},height:function(){return a.size.height},scale:s,opacity:o})}}}]);
//# sourceMappingURL=index.js.map